<!DOCTYPE html>
<html>
<head>
    <title>Send Log</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f6f8;
        }

        .container {
            width: 50%;
            margin: 60px auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
        }

        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
        }

        button {
            margin-top: 20px;
            padding: 12px;
            width: 100%;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background: #0056b3;
        }

        .success {
            margin-bottom: 15px;
            padding: 12px;
            background: #d4edda;
            color: #155724;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }

        a {
            display: block;
            margin-top: 15px;
            text-align: center;
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>

<body>

<div class="container">

    <h1>ðŸ“¤ Send Log</h1>

    {% if success %}
        <div class="success">
            âœ… Log sent successfully
        </div>

        <a href="/logs/anomalies/">ðŸš¨ View Detected Anomalies</a>
    {% endif %}


    <form method="post">

        {% csrf_token %}

        <!-- ================= TIMESTAMP ================= -->

        <label>Timestamp (Auto)</label>
        <input type="datetime-local" id="timestamp" name="timestamp" readonly>


        <!-- ================= SERVICE ================= -->

        <label>Service</label>

        <select name="service" id="serviceSelect" required onchange="toggleServiceInput()">
            <option value="">-- Select a Service --</option>

            <option value="api-service">api-service</option>
            <option value="auth-service">auth-service</option>
            <option value="database-service">database-service</option>
            <option value="cache-service">cache-service</option>
            <option value="payment-service">payment-service</option>
            <option value="email-service">email-service</option>
            <option value="web-ui">web-ui</option>
            <option value="notification-service">notification-service</option>
            <option value="memory-service">memory-service</option>

            <option value="other">-- Other (Custom) --</option>
        </select>


        <input type="text"
               name="service_custom"
               id="serviceCustom"
               placeholder="Enter custom service"
               style="display:none;margin-top:5px;">


        <!-- ================= LOG LEVEL ================= -->

        <label>Log Level</label>

        <select name="log_level" required>
            <option value="INFO">INFO</option>
            <option value="WARN">WARN</option>
            <option value="ERROR">ERROR</option>
        </select>


        <!-- ================= MESSAGE ================= -->

        <label>Message</label>

        <select name="message" id="messageSelect" required onchange="toggleMessageInput()">

            <option value="">-- Select a Message --</option>

            <option value="Request processed successfully">âœ“ Request processed successfully</option>
            <option value="User authentication successful">âœ“ User authentication successful</option>
            <option value="Data retrieved from cache">âœ“ Data retrieved from cache</option>
            <option value="Payment processed">âœ“ Payment processed</option>
            <option value="Email sent successfully">âœ“ Email sent successfully</option>

            <option value="Connection timeout">âš  Connection timeout</option>
            <option value="Memory usage 75%">âš  Memory usage 75%</option>
            <option value="Redis connection lost">âš  Redis connection lost</option>
            <option value="Retrying operation">âš  Retrying operation</option>

            <option value="Database query failed">âœ— Database query failed</option>
            <option value="Authentication failed">âœ— Authentication failed</option>
            <option value="Payment gateway timeout">âœ— Payment gateway timeout</option>
            <option value="Connection pool exhausted">âœ— Connection pool exhausted</option>
            <option value="JWT decode error">âœ— JWT decode error</option>

            <option value="other">-- Custom Message --</option>

        </select>


        <textarea name="message_custom"
                  id="messageCustom"
                  rows="4"
                  placeholder="Enter custom message"
                  style="display:none;margin-top:5px;"></textarea>


        <!-- ================= BUTTON ================= -->

        <button type="submit">ðŸš€ Send Log</button>

    </form>


    <a href="/">â¬… Back to Home</a>

</div>



<!-- ================================================= -->
<!-- ================= JAVASCRIPT =================== -->
<!-- ================================================= -->

<script>

    /* ===================================
       LIVE AUTO TIMESTAMP
    =================================== */

    function updateTimestamp() {

        const input = document.getElementById("timestamp");

        const now = new Date();

        const localTime = new Date(
            now.getTime() - now.getTimezoneOffset() * 60000
        ).toISOString().slice(0,16);

        input.value = localTime;
    }

    // First load
    updateTimestamp();

    // Every second update
    setInterval(updateTimestamp, 1000);



    /* ===================================
       SERVICE CUSTOM INPUT
    =================================== */

    function toggleServiceInput() {

        const select = document.getElementById("serviceSelect");
        const custom = document.getElementById("serviceCustom");

        if (select.value === "other") {

            custom.style.display = "block";
            custom.required = true;

        } else {

            custom.style.display = "none";
            custom.required = false;
            custom.value = "";
        }
    }



    /* ===================================
       MESSAGE CUSTOM INPUT
    =================================== */

    function toggleMessageInput() {

        const select = document.getElementById("messageSelect");
        const custom = document.getElementById("messageCustom");

        if (select.value === "other") {

            custom.style.display = "block";
            custom.required = true;

        } else {

            custom.style.display = "none";
            custom.required = false;
            custom.value = "";
        }
    }

</script>

</body>
</html>
